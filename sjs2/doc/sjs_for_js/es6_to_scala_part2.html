<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/sjs2/assets/img/scala-js-logo-32.png">

    <title>Scala.js - From ES6 to Scala: Collections</title>

    <!-- Bootstrap core CSS -->
    <link href="/sjs2/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/sjs2/assets/css/highlight.css" type="text/css" rel="stylesheet" media="screen,projection"/>

    <!-- Custom styles for this template -->
    <link href="/sjs2/assets/css/style.css" rel="stylesheet">
    <link href="/sjs2/assets/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.rawgit.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"></script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/sjs2/">Scala.js</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/sjs2/doc">DOCUMENTATION</a></li>
        <li ><a href="/sjs2/tutorial">TUTORIALS</a></li>
        <li ><a href="/sjs2/community">COMMUNITY</a></li>
        <li ><a href="/sjs2/news">NEWS</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>
<div id="wrap">
<div id="main">
<div id="blue">
    <div class="container">
        <div class="row">
            <h3>From ES6 to Scala: Collections</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->

<div class="container mtb">
    <div class="row">
        <div class="col-md-9">
            <p>In JavaScript there are basically two kinds of collections you have used to store your data: the <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a> for sequential
data and <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a> (aka dictionary or hash map) for storing key-value pairs. Furthermore both of these are mutable by
default, so if you pass them to a function, that function might go and modify them without your knowledge.</p>

<p>ES6 extends your options with four new collection types <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a>, <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a>, <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap"><code>WeakMap</code></a> and 
<a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet"><code>WeakSet</code></a>. Of these the <code>WeakMap</code> and <code>WeakSet</code> are for special purposes only, so in your application you
would typically use only <code>Map</code> and <code>Set</code>.</p>

<h2 id="scala-collection-hierarchy">Scala collection hierarchy</h2>

<p>Unlike JavaScript, the Scala standard library has a huge variety of different collection types to choose from.
Furthermore the collections are organized in a type hierarchy, meaning they share a lot of common functionality and
interfaces. The high-level hierarchy for the abstract base classes and traits is shown in the image below.</p>

<p><img src="http://docs.scala-lang.org/resources/images/collections.png" alt="Scala collection hierarchy" /></p>

<p>Scala provides <em>immutable</em> and <em>mutable</em> implementations for all these collection types.</p>

<table class="table table-bordered">
<tr><th colspan="2"><h6>Common <i>immutable</i> collections</h6></th></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Seq"><code>Seq</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.List"><code>List</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Vector"><code>Vector</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Stream"><code>Stream</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Range"><code>Range</code></a></td></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Map"><code>Map</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.HashMap"><code>HashMap</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.TreeMap"><code>TreeMap</code></a></td></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.Set"><code>Set</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.HashSet"><code>HashSet</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.immutable.TreeSet"><code>TreeSet</code></a></td></tr>
<tr><th colspan="2"><h6>Common <i>mutable</i> collections</h6></th></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.Seq"><code>Seq</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.Buffer"><code>Buffer</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.LinkedList"><code>LinkedList</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.Queue"><code>Queue</code></a></td></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.Map"><code>Map</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.HashMap"><code>HashMap</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.LinkedHashMap"><code>LinkedHashMap</code></a></td></tr>
<tr><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.Set"><code>Set</code></a></td><td><a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.HashSet"><code>HashSet</code></a></td></tr>
</table>

<h2 id="comparing-to-javascript">Comparing to JavaScript</h2>

<p>Let’s start with familiar things and see how Scala collections compare with the JavaScript <code>Array</code> and <code>Object</code> (or
<code>Map</code>). The closest match for <code>Array</code> would be the mutable <code>Buffer</code> since arrays in Scala cannot change size after
initialization. For <code>Object</code> (or <code>Map</code>) the best match is the mutable <code>HashMap</code>.</p>

<p>A simple example of array manipulation.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Fox&quot;</span><span class="p">,</span> <span class="s2">&quot;jumped&quot;</span><span class="p">,</span> <span class="s2">&quot;over&quot;</span><span class="p">];</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">);</span> <span class="c1">// Fox jumped over me</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="s2">&quot;Red&quot;</span><span class="p">);</span> <span class="c1">// Red Fox jumped over me</span>
<span class="kr">const</span> <span class="nx">fox</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="nx">a</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;you&quot;</span><span class="p">;</span> <span class="c1">// Red Fox jumped over you</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">));</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">scala.collection.mutable</span>
<span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="n">mutable</span><span class="o">.</span><span class="nc">Buffer</span><span class="o">(</span><span class="s">&quot;Fox&quot;</span><span class="o">,</span> <span class="s">&quot;jumped&quot;</span><span class="o">,</span> <span class="s">&quot;over&quot;</span><span class="o">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="o">(</span><span class="s">&quot;me&quot;</span><span class="o">)</span> <span class="c1">// Fox jumped over me</span>
<span class="n">a</span><span class="o">.</span><span class="n">prepend</span><span class="o">(</span><span class="s">&quot;Red&quot;</span><span class="o">)</span> <span class="c1">// Red Fox jumped over me</span>
<span class="k">val</span> <span class="n">fox</span> <span class="k">=</span> <span class="n">a</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="n">a</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="k">=</span> <span class="s">&quot;you&quot;</span> <span class="c1">// Red Fox jumped over you</span>
<span class="n">println</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="n">mkString</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">))</span></code></pre></div>
</div>
</div>

<p>Working with a hash map (or Object).</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{</span><span class="nx">first</span><span class="o">:</span> <span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">&quot;Bond&quot;</span><span class="p">};</span>
<span class="nx">p</span><span class="p">[</span><span class="s2">&quot;profession&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Spy&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="p">}</span> <span class="nx">$</span><span class="p">{</span><span class="nx">p</span><span class="p">.</span><span class="nx">last</span><span class="p">}</span><span class="err">`</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">scala.collection.mutable</span>
<span class="k">val</span> <span class="n">p</span> <span class="k">=</span> <span class="n">mutable</span><span class="o">.</span><span class="nc">HashMap</span><span class="o">(</span><span class="s">&quot;first&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;James&quot;</span><span class="o">,</span> 
  <span class="s">&quot;last&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;Bond&quot;</span><span class="o">)</span>
<span class="n">p</span><span class="o">(</span><span class="s">&quot;profession&quot;</span><span class="o">)</span> <span class="k">=</span> <span class="s">&quot;Spy&quot;</span>
<span class="k">val</span> <span class="n">name</span> <span class="k">=</span> <span class="n">s</span><span class="s">&quot;${p(&quot;</span><span class="n">first</span><span class="s">&quot;)} ${p(&quot;</span><span class="n">last</span><span class="s">&quot;)}&quot;</span></code></pre></div>
</div>
</div>

<p>Even though you can use Scala collections like you would use arrays and objects in JavaScript, you really shouldn’t,
because you are missing a lot of great functionality.</p>

<h2 id="common-collections-seq-map-set-and-tuple">Common collections <code>Seq</code>, <code>Map</code>, <code>Set</code> and <code>Tuple</code></h2>

<p>For 99% of the time you will be working with those four common collection types in your code. You will instantiate
implementation collections like <code>Vector</code> or <code>HashMap</code>, but in your code you don’t really care what the implementation is,
as long as it behaves like a <code>Seq</code> or a <code>Map</code>.</p>

<h4 id="tuple">Tuple</h4>

<p>You may have noticed that <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.Tuple2"><code>Tuple</code></a> is not shown in the collection hierarchy above, because it’s a very specific
collection type of its own. Scala tuple combines a fixed number of items together so that they can be passed around as a
whole. A tuple is immutable and can hold different types, so it’s quite close to an anonymous case class in that sense.
Tuples are used in situations where you need to group items together, like key and value in a map, or to return multiple
values. In JavaScript you can use a fixed size array to represent a tuple.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">t</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="s2">&quot;Bond&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">kv</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">];</span>

<span class="kd">function</span> <span class="nx">sumProduct</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">product</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="nx">of</span> <span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="nx">product</span> <span class="o">*=</span> <span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">product</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>
</div>
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">t</span> <span class="k">=</span> <span class="o">(</span><span class="s">&quot;James&quot;</span><span class="o">,</span> <span class="s">&quot;Bond&quot;</span><span class="o">,</span> <span class="mi">42</span><span class="o">)</span>
<span class="k">val</span> <span class="n">kv</span> <span class="k">=</span> <span class="s">&quot;key&quot;</span> <span class="o">-&gt;</span> <span class="mi">42</span> <span class="c1">// same as (&quot;key&quot;, 42)</span>

<span class="k">def</span> <span class="n">sumProduct</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">var</span> <span class="n">sum</span> <span class="k">=</span> <span class="mi">0</span>
  <span class="k">var</span> <span class="n">product</span> <span class="k">=</span> <span class="mi">1</span>
  <span class="k">for</span><span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="n">product</span> <span class="o">*=</span> <span class="n">i</span>
  <span class="o">}</span>
  <span class="o">(</span><span class="n">sum</span><span class="o">,</span> <span class="n">product</span><span class="o">)</span>
<span class="o">}</span></code></pre></div>
</div>
</div>

<p>To access values inside a tuple, use the <code>tuple._1</code> syntax, where the number indicates position within the tuple
(starting from 1, not 0). Quite often you can also use <em>destructuring</em> to extract the values.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">sc</span> <span class="o">=</span> <span class="nx">sumProduct</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="kr">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">sc</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kr">const</span> <span class="nx">product</span> <span class="o">=</span> <span class="nx">sc</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

<span class="c1">// with destructuring</span>
<span class="kr">const</span> <span class="p">[</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">product</span><span class="p">]</span> <span class="o">=</span> <span class="nx">sumProduct</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span></code></pre></div>
</div>
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">sc</span> <span class="k">=</span> <span class="n">sumProduct</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span>
<span class="k">val</span> <span class="n">sum</span> <span class="k">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">_1</span>
<span class="k">val</span> <span class="n">product</span> <span class="k">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">_2</span>

<span class="c1">// with destructuring</span>
<span class="k">val</span> <span class="o">(</span><span class="n">sum</span><span class="o">,</span> <span class="n">product</span><span class="o">)</span> <span class="k">=</span> <span class="n">sumProduct</span><span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span></code></pre></div>
</div>
</div>

<h4 id="seq">Seq</h4>

<p><code>Seq</code> is an ordered sequence. Typical implementations include <code>List</code>, <code>Vector</code>, <code>Buffer</code> and <code>Range</code>. Although Scala
<code>Array</code> is not a <code>Seq</code>, it can be wrapped into a <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.mutable.WrappedArray"><code>WrappedArray</code></a> to enable all <code>Seq</code>
operations on arrays. In Scala this is done automatically through an implicit conversion, allowing you to write code
like following.</p>

<div class="row">
<div class="col-md-9"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">ar</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
<span class="k">val</span> <span class="n">product</span> <span class="k">=</span> <span class="n">ar</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">(</span><span class="mi">1</span><span class="o">)((</span><span class="n">a</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">a</span> <span class="o">*</span> <span class="n">x</span><span class="o">)</span> <span class="c1">// foldLeft comes from WrappedArray</span></code></pre></div>
</div>
</div>

<p>The <code>Seq</code> trait exposes many methods familiar to the users of JavaScript arrays, including 
<a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@foreach(f:A=&gt;Unit):Unit"><code>foreach</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@map[B](f:A=&gt;B):Seq[B]"><code>map</code></a>, 
<a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@filter(p:A=&gt;Boolean):Repr"><code>filter</code></a>, <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@slice(from:Int,until:Int):Repr"><code>slice</code></a> 
and <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@reverse:Repr"><code>reverse</code></a>. In addition to these, there are several more useful methods
shown with examples in the code block below.</p>

<div class="row">
<div class="col-md-9"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">seq</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">isEmpty</span> <span class="o">==</span> <span class="kc">false</span>
<span class="n">seq</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">==</span> <span class="kc">false</span> <span class="c1">// JS Array.indexOf(6) == -1</span>
<span class="n">seq</span><span class="o">.</span><span class="n">forall</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="kc">true</span> <span class="c1">// JS Array.every()</span>
<span class="n">seq</span><span class="o">.</span><span class="n">exists</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">==</span> <span class="kc">true</span> <span class="c1">// JS Array.some()</span>
<span class="n">seq</span><span class="o">.</span><span class="n">find</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">4</span><span class="o">)</span> <span class="c1">// JS Array.find()</span>
<span class="n">seq</span><span class="o">.</span><span class="n">head</span> <span class="o">==</span> <span class="mi">1</span>
<span class="n">seq</span><span class="o">.</span><span class="n">tail</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">last</span> <span class="o">==</span> <span class="mi">5</span>
<span class="n">seq</span><span class="o">.</span><span class="n">init</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">drop</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">dropRight</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">count</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">seq</span><span class="o">.</span><span class="n">groupBy</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Map</span><span class="o">(</span><span class="mi">1</span> <span class="o">-&gt;</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">),</span> <span class="mi">0</span> <span class="o">-&gt;</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">))</span>
<span class="n">seq</span><span class="o">.</span><span class="n">sortBy</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="o">-</span><span class="n">x</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">seq</span><span class="o">.</span><span class="n">partition</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">==</span> <span class="o">(</span><span class="nc">Seq</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">),</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">))</span>
<span class="n">seq</span> <span class="o">:+</span> <span class="mi">6</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">)</span>
<span class="n">seq</span> <span class="o">++</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">)</span> <span class="c1">// JS Array.concat()</span></code></pre></div>
</div>
</div>

<p>JavaScript <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce"><code>Array.reduce</code></a> functionality is covered by separate <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@reduceLeft[B&gt;:A](op:(B,A)=&gt;B):B"><code>reduceLeft</code></a>
and <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@foldLeft[B](z:B)(op:(B,A)=&gt;B):B"><code>foldLeft</code></a> methods. The difference is that in <code>foldLeft</code>
you provide an initial (“zero”) value (which is optional parameter to <code>Array.reduce</code>) and in  <code>reduceLeft</code> you don’t.
Also note that in <code>foldLeft</code> the type of the accumulator can be something else, for example a tuple, but in <code>reduceLeft</code>
it must always be a supertype of the value.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">sumProduct</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// destructuring works in the function argument</span>
  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(([</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">product</span><span class="p">],</span> <span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> 
    <span class="p">[</span><span class="nx">sum</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">product</span> <span class="o">*</span> <span class="nx">x</span><span class="p">],</span> 
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="c1">// use an array to represent a tuple</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></div>
</div>
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">def</span> <span class="n">sumProduct</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">Seq</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="c1">// use a tuple accumulator to hold sum and product</span>
  <span class="n">s</span><span class="o">.</span><span class="n">foldLeft</span><span class="o">((</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)){</span> <span class="k">case</span> <span class="o">((</span><span class="n">sum</span><span class="o">,</span> <span class="n">product</span><span class="o">),</span> <span class="n">x</span><span class="o">)</span> <span class="k">=&gt;</span> 
    <span class="o">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">x</span><span class="o">,</span> <span class="n">product</span> <span class="o">*</span> <span class="n">x</span><span class="o">)</span> 
  <span class="o">}</span>
<span class="o">}</span></code></pre></div>
</div>
</div>

<h2 id="map">Map</h2>

<p>A <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Map"><code>Map</code></a> consists of pairs of keys and values. Both keys and values can be of any valid Scala type, unlike in JavaScript
where an <code>Object</code> may only contain <code>string</code> keys (the new ES6 <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> allows using other types as keys, but supports only
referential equality for comparing keys). As keys must be unique, a <code>Map</code> is a great way to store information you need
to look up later.</p>

<p>JavaScript <code>Object</code> doesn’t really have methods for using it as a map, although you can iterate over the keys
with <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys"><code>Object.keys</code></a>. When using <code>Object</code> as a map, most developers use utility libraries like
<a href="https://lodash.com/docs#mapValues">lodash</a> to get access to suitable functionality. The ES6 <code>Map</code> object contains
<a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/keys"><code>keys</code></a>, <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/values"><code>values</code></a> and <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach"><code>forEach</code></a> methods for accessing its contents, but all
transformation methods are missing.</p>

<p>You can build a map directly or from a sequence of key-value pairs.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// object style map</span>
<span class="kr">const</span> <span class="nx">m</span> <span class="o">=</span> <span class="p">{</span><span class="nx">first</span><span class="o">:</span> <span class="s2">&quot;James&quot;</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">&quot;Bond&quot;</span><span class="p">};</span>
<span class="c1">// ES6 Map</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;first&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;last&quot;</span><span class="p">,</span> <span class="s2">&quot;Bond&quot;</span><span class="p">]];</span>
<span class="kr">const</span> <span class="nx">m2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">m</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="s">&quot;first&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;James&quot;</span><span class="o">,</span> <span class="s">&quot;last&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;Bond&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">data</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="s">&quot;first&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;James&quot;</span><span class="o">,</span> <span class="s">&quot;last&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;Bond&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">m2</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="n">data</span><span class="k">:_</span><span class="kt">*</span><span class="o">)</span></code></pre></div>
</div>
</div>

<p>In Scala when a function expects a variable number of parameters (like the <code>Map</code> constructor), you can destructure a
sequence with the <code>seq:_*</code> syntax.</p>

<p>Accessing <code>Map</code> contents can be done in many ways.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// object syntax</span>
<span class="kr">const</span> <span class="nx">name</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">last</span><span class="p">},</span> <span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">first</span><span class="p">}</span> <span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">last</span><span class="p">}</span><span class="err">`</span>
<span class="c1">// ES6 Map syntax</span>
<span class="kr">const</span> <span class="nx">name2</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">m2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;last&quot;</span><span class="p">),</span> <span class="nx">m2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;first&quot;</span><span class="p">)</span> <span class="nx">m2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;last&quot;</span><span class="p">)</span><span class="err">`</span>
<span class="c1">// use default value when missing</span>
<span class="kr">const</span> <span class="nx">age</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">age</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="s2">&quot;42&quot;</span> <span class="o">:</span> <span class="nx">m</span><span class="p">.</span><span class="nx">age</span><span class="p">;</span>
<span class="c1">// check all fields are present</span>
<span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">first</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> 
  <span class="nx">m</span><span class="p">.</span><span class="nx">last</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> 
  <span class="nx">m</span><span class="p">.</span><span class="nx">age</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">last</span><span class="p">},</span> <span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">first</span><span class="p">}</span><span class="o">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">m</span><span class="p">.</span><span class="nx">age</span><span class="p">}</span><span class="err">`</span> <span class="o">:</span>
  <span class="s2">&quot;missing&quot;</span><span class="p">;</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">name</span> <span class="k">=</span> <span class="n">s</span><span class="s">&quot;${m(&quot;</span><span class="n">last</span><span class="s">&quot;)}, ${m(&quot;</span><span class="n">first</span><span class="s">&quot;)} ${m(&quot;</span><span class="n">last</span><span class="s">&quot;)}&quot;</span>
<span class="c1">// use default value when missing</span>
<span class="k">val</span> <span class="n">age</span> <span class="k">=</span> <span class="n">m</span><span class="o">.</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">&quot;age&quot;</span><span class="o">,</span> <span class="s">&quot;42&quot;</span><span class="o">)</span>
<span class="c1">// check all fields are present</span>
<span class="k">val</span> <span class="n">person</span> <span class="k">=</span> <span class="o">(</span><span class="k">for</span> <span class="o">{</span>
    <span class="n">first</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;first&quot;</span><span class="o">)</span>
    <span class="n">last</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;last&quot;</span><span class="o">)</span>
    <span class="n">age</span> <span class="k">&lt;-</span> <span class="n">m</span><span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;age&quot;</span><span class="o">)</span>
  <span class="o">}</span> <span class="k">yield</span> <span class="n">s</span><span class="s">&quot;$last, $first: $age&quot;</span>
  <span class="o">).</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">&quot;missing&quot;</span><span class="o">)</span></code></pre></div>
</div>
</div>

<p>In the previous example <code>m.get("first")</code> returns an <code>Option[String]</code> indicating whether the key is present in the map
or not. By using for comprehension we can easily extract three separate values from the map and use them to build the
result. The result from <code>for {} yield</code> is also an <code>Option[String]</code> so we can use <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.Option@getOrElse[B&gt;:A](default:=&gt;B):B"><code>getOrElse</code></a>
to provide a default value.</p>

<p>Let’s try something more complicated. Say we need to maintain a collection of players and all their game scores. This
could be represented by a <code>Map[String, Seq[Int]]</code></p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">scores</span> <span class="o">=</span> <span class="p">{};</span>

<span class="kd">function</span> <span class="nx">addScore</span><span class="p">(</span><span class="nx">player</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">scores</span><span class="p">[</span><span class="nx">player</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> 
    <span class="nx">scores</span><span class="p">[</span><span class="nx">player</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">scores</span><span class="p">[</span><span class="nx">player</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">score</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">bestScore</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">bestScore</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">bestPlayer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">player</span> <span class="k">in</span> <span class="nx">scores</span><span class="p">)</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">scores</span><span class="p">[</span><span class="nx">player</span><span class="p">].</span><span class="nx">reduce</span><span class="p">(</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">score</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">score</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
    <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span> <span class="nx">max</span> <span class="o">&gt;</span> <span class="nx">bestScore</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">bestScore</span> <span class="o">=</span> <span class="nx">max</span><span class="p">;</span>
      <span class="nx">bestPlayer</span> <span class="o">=</span> <span class="nx">player</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">[</span><span class="nx">bestPlayer</span><span class="p">,</span> <span class="nx">bestScore</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">averageScore</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">player</span> <span class="k">in</span> <span class="nx">scores</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">score</span> <span class="nx">of</span> <span class="nx">scores</span><span class="p">[</span><span class="nx">player</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">score</span><span class="p">;</span>
      <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span> <span class="nx">count</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">else</span> 
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">sum</span> <span class="o">/</span> <span class="nx">count</span><span class="p">);</span> 
<span class="p">}</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">import</span> <span class="nn">scala.collection.mutable</span>

<span class="k">val</span> <span class="n">scores</span> <span class="k">=</span> <span class="n">mutable</span><span class="o">.</span><span class="nc">Map</span><span class="o">.</span><span class="n">empty</span><span class="o">[</span><span class="kt">String</span>, 
                               <span class="kt">mutable.Buffer</span><span class="o">[</span><span class="kt">Int</span><span class="o">]]</span>

<span class="k">def</span> <span class="n">addScore</span><span class="o">(</span><span class="n">player</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">score</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">scores</span><span class="o">.</span><span class="n">getOrElseUpdate</span><span class="o">(</span><span class="n">player</span><span class="o">,</span> <span class="n">mutable</span><span class="o">.</span><span class="nc">Buffer</span><span class="o">())</span>
    <span class="o">.</span><span class="n">append</span><span class="o">(</span><span class="n">score</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">def</span> <span class="n">bestScore</span><span class="k">:</span> <span class="o">(</span><span class="kt">String</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">all</span> <span class="k">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">flatMap</span> <span class="o">{</span>
    <span class="k">case</span> <span class="o">(</span><span class="n">player</span><span class="o">,</span> <span class="n">pScores</span><span class="o">)</span> <span class="k">=&gt;</span>
      <span class="n">pScores</span><span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="n">s</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">player</span><span class="o">,</span> <span class="n">s</span><span class="o">))</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">all</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">)</span>
    <span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span>
  <span class="k">else</span>
    <span class="n">all</span><span class="o">.</span><span class="n">maxBy</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">_2</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">def</span> <span class="n">averageScore</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">allScores</span> <span class="k">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">flatMap</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">_2</span><span class="o">)</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">allScores</span><span class="o">.</span><span class="n">isEmpty</span><span class="o">)</span>
    <span class="mi">0</span>
  <span class="k">else</span>
    <span class="n">allScores</span><span class="o">.</span><span class="n">sum</span> <span class="o">/</span> <span class="n">allScores</span><span class="o">.</span><span class="n">size</span>
<span class="o">}</span></code></pre></div>
</div>
</div>

<p>In the example above the both versions are using mutable collections. Coming from JavaScript it’s good to start with the
more familiar mutable collections, but over time Scala developers tend to favor immutable versions. Immutable
collections in Scala use structural sharing to minimize copying and to provide good performance. Sharing is ok, because
the data is immutable!</p>

<p>The best score is found by first flattening the whole structure into a sequence of (player, score) pairs. Then we use
the <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Seq@maxBy[B](f:A=&gt;B):A"><code>maxBy</code></a> method to find the maximum score by looking at the second
value in the tuple.</p>

<p>Average is calculated simply by flattening all scores into a single sequence and then calculating its sum and divide by
count.</p>

<h2 id="set">Set</h2>

<p>A <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Set"><code>Set</code></a> is like a <code>Map</code> without values, just the distinct keys. In JavaScript it’s typical to
emulate a Set by storing the values as keys into an <code>Object</code>. This of course means that the values must be converted to
strings. In ES6 there is a new <a target="jsdoc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a> type that works with all kinds of value types, but like with <code>Map</code>, it’s
based on reference equality making it less useful when dealing with complex value types.</p>

<p>In Scala sets are quite often used when you need to have distinct values with no duplicates. Adding values to a set
automatically guarantees that all duplicate values are eliminated. They are also useful when you just need to check if
something exists, without storing its value. Set operations like <a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Set@diff(that:scala.collection.GenSet[A]):This"><code>diff</code></a>,
<a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Set@intersect(that:scala.collection.GenSet[A]):Repr"><code>intersect</code></a> and 
<a target="scaladoc" href="http://www.scala-lang.org/api/current/#scala.collection.Set@union(that:scala.collection.GenSet[A]):This"><code>union</code></a> allow you to build new sets out of other
sets to check, for example, what has changed.</p>

<div class="row">
<div class="col-md-9"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">set1</span> <span class="k">=</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>
<span class="k">val</span> <span class="n">set2</span> <span class="k">=</span> <span class="nc">Set</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">6</span><span class="o">)</span>
<span class="k">val</span> <span class="n">addedValues</span> <span class="k">=</span> <span class="n">set2</span> <span class="n">diff</span> <span class="n">set1</span> <span class="c1">// Set(6)</span>
<span class="k">val</span> <span class="n">removedValues</span> <span class="k">=</span> <span class="n">set1</span> <span class="n">diff</span> <span class="n">set2</span> <span class="c1">// Set(4)</span></code></pre></div>
</div>
</div>

<p>Note how in Scala you can also omit the <code>.</code> and parentheses in method calls.</p>

<p>Sets are also a convenient way to check for multiple values in methods like <code>filter</code>.</p>

<div class="row">
<div class="col-md-6"><h6 class="code-block-header">ES6</h6><div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kr">const</span> <span class="nx">common</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;a&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;the&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="s2">&quot;an&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> 
  <span class="s2">&quot;and&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">};</span>
<span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">&quot;The sun is a star and an energy source&quot;</span>
<span class="kr">const</span> <span class="nx">words</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">common</span><span class="p">[</span><span class="nx">s</span><span class="p">]);</span></code></pre></div>
</div>
        
<div class="col-md-6"><h6 class="code-block-header">Scala</h6><div class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">common</span> <span class="k">=</span> <span class="nc">Set</span><span class="o">(</span><span class="s">&quot;a&quot;</span><span class="o">,</span> <span class="s">&quot;the&quot;</span><span class="o">,</span> <span class="s">&quot;an&quot;</span><span class="o">,</span> <span class="s">&quot;and&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">text</span> <span class="k">=</span> <span class="s">&quot;The sun is a star and an energy source&quot;</span>
<span class="k">val</span> <span class="n">words</span> <span class="k">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="o">(</span><span class="s">&quot; &quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">map</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">toLowerCase</span><span class="o">)</span>
  <span class="o">.</span><span class="n">filterNot</span><span class="o">(</span><span class="n">common</span><span class="o">)</span>
<span class="c1">// Array(sun, is, star, energy, source)</span></code></pre></div>
</div>
</div>

<p>Next, let’s look at some more <a href="es6_to_scala_part3.html">advanced paradigms</a> and features of Scala.</p>

            <div class="spacing"></div>
        </div>
        <div class="col-md-3">
            <nav class="toc" role="navigation">
                
<ul>
    
    <li>
        <a href="/sjs2/doc/">
            
            Introduction
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/quick-start.html">
            
            Quick Start
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/why-scalajs.html">
            
            Why Scala.js?
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/sjs_for_js/">
            
            Scala.js for JavaScript developers
            
        </a>
    </li>
    
      
<ul>
    
    <li>
        <a href="/sjs2/doc/sjs_for_js/es6_to_scala_part1.html">
            
            From ES6 to Scala: Basics
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/sjs_for_js/es6_to_scala_part2.html">
            
            <b>From ES6 to Scala: Collections</b>
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/sjs_for_js/es6_to_scala_part3.html">
            
            From ES6 to Scala: Advanced
            
        </a>
    </li>
    
    
</ul>

    
    
    <li>
        <a href="/sjs2/doc/project/">
            
            Project setup
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/interoperability/">
            
            JavaScript interoperability
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/api.html">
            
            Scala.js API
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/semantics.html">
            
            Semantics of Scala.js
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/internals">
            
            Internals
            
        </a>
    </li>
    
    
    <li>
        <a href="/sjs2/doc/faq.html">
            
            FAQ
            
        </a>
    </li>
    
    
</ul>

            </nav>
        </div>
    </div>
</div>

</div>
</div>
<div id="footerwrap">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <h4>LEARN</h4>

                <div class="hline-w"></div>
                <a class="grey-text text-lighten-3" href="/sjs2/doc">Documentation</a><br/>
                <a class="grey-text text-lighten-3" href="/sjs2/tutorial">Tutorial</a><br/>
                <a class="grey-text text-lighten-3" href="/sjs2/doc/faq.html">FAQ</a>
            </div>
            <div class="col-md-4">
                <h4>COMMUNITY</h4>

                <div class="hline-w"></div>
                <a class="grey-text text-lighten-3" href="https://gitter.im/scala-js/scala-js">Gitter chat</a><br/>
                <a class="grey-text text-lighten-3" href="http://stackoverflow.com/questions/tagged/scala.js">Stackoverflow</a><br/>
                <a class="grey-text text-lighten-3" href="https://groups.google.com/forum/?fromgroups#!forum/scala-js">Mailing list</a>
            </div>
            <div class="col-md-4">
            </div>
        </div>
    </div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/sjs2/assets/js/bootstrap.min.js"></script>
<script src="/sjs2/assets/js/highlight.pack.js"></script>
<script src="/sjs2/assets/js/custom.js"></script>
<script>
</script>

</body>
</html>